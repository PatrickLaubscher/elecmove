<section
class="max-w-screen-xl w-11/12 md:w-4/6 mx-auto my-15 dark:text-gray-200"
>
    <h1
    class="text-xl md:text-2xl uppercase dark:text-gray-200"
    >
        Gérer mes voitures
    </h1>

    <button
    (click)="displayForm()"
    class="mt-8 uppercase cursor-pointer bg-noir text-blanc px-4 py-2 rounded-md border border-vert ease-in-out duration-200 hover:drop-shadow-2xl hover:text-vert dark:bg-gray-800 dark:text-gray-200"
    >
        @if(isDisplay() === false) {
            Ajouter une voiture +
        } @else {
            Retour à la liste
        }

    </button>
</section>

@if(isDisplay() === false) {
    <section
    class="max-w-screen-xl w-11/12 md:w-4/6 mx-auto my-15 dark:text-gray-200"
    >
        <h2
        class="text-md md:text-xl uppercase mb-3 dark:text-gray-200"
        >
            Liste de vos voitures
        </h2>

        @if(carsList.isLoading()){
        <p class="dark:text-gray-200">Chargement...</p>

        } @else {

            @if(carsList.hasValue() && carsList.value()!.length > 0) {

                <app-car-list
                    [cars]="carsList.value()!"
                    (editCar)="onEditCar($event)"
                    (deleteCar)="onDeleteCar($event)"
                />

            } @else {

            <p class="dark:text-gray-200">Vous n'avez aucune voiture enregistrée.</p>
            }

        }
    </section>
} @else {
    <app-car-form [carToEdit]="carToEdit()" (formClosed)="onFormClosed()"/>
}

<!-- Modal for confirming delete -->
<app-standard-modal [(open)]="isDeleteModalOpen">
    <h2
    ngProjectAs="card-title"
    class="text-sm md:text-md uppercase dark:text-gray-200"
    >
        Confirmer la suppression
    </h2>
    <div ngProjectAs="card-body" class="dark:text-gray-200">
        <p class="mb-4">
            Êtes-vous sûr de vouloir supprimer la voiture
            <strong>{{ carToDelete()?.brand }} {{ carToDelete()?.type }}</strong> ?
        </p>
        <p class="text-sm text-gray-600 dark:text-gray-400">
            Cette action est irréversible.
        </p>
    </div>
    <div ngProjectAs="card-footer" class="flex gap-4 justify-end">
        <button
            (click)="cancelDelete()"
            class="cursor-pointer bg-gray-300 dark:bg-gray-600 text-noir dark:text-gray-200 px-4 py-2 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors"
        >
            Annuler
        </button>
        <button
            (click)="confirmDelete()"
            class="cursor-pointer bg-rouge text-blanc px-4 py-2 rounded-md hover:bg-red-700 transition-colors"
        >
            Supprimer
        </button>
    </div>
</app-standard-modal>
