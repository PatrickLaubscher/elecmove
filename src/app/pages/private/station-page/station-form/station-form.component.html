

<div
class="w-11/12 md:w-4/6 mx-auto my-5 h-4"
>
    @if(serverError()) {
        <p class="text-xl text-rouge text-center position-absolute">
            {{serverError()}}
        </p>
    }
</div>


<!-- New station Form -->

<section
class="w-11/12 md:w-4/6 mx-auto my-30"
>   
    
    <h2 
    class="text-md md:text-xl uppercase mb-15"
    >
        Ajouter une station
    </h2>


    <form
    [formGroup]="form" 
    (ngSubmit)="submit()"
    class="w-full md:w-4/5 lg:w-3/5 mx-auto flex flex-col justify-center items-center"
    >   

        <!-- nom de la station -->
        <div
        class="w-full mb-2"
        >
            <label 
            for="name" 
            >
                Nom de la station
            </label>
            <input 
            formControlName="name" 
            type="text" 
            class="w-full rounded-xl border border-noir focus:outline-none focus:ring-2 focus:ring-vert focus:border-transparent" 
            placeholder="Nom de la borne" required 
            />
            <div class="h-5 mt-1 text-sm">
                @let nameInput = form.controls.name;
                @if (nameInput.invalid && (nameInput.dirty || nameInput.touched)) {
                    @if (nameInput.hasError('required')) {
                        <span
                        class="text-rouge">
                            Veuillez donner un nom à la borne (ex: Borne de recharge)
                        </span>
                    }
                }
            </div>

        </div>


        <!-- localisation de la station -->
        <div
        class="w-full mb-2"
        >   
            <button 
            (click)="isLocationModalOpen.set(true)"
            class="mb-2 cursor-pointer bg-noir text-blanc px-4 py-2 rounded-md border border-vert ease-in-out duration-200 hover:drop-shadow-2xl hover:text-vert"
            >
                Choisir une localisation
            </button>
            
            <app-standard-modal  [(open)]="isLocationModalOpen">
                <h3 ngProjectAs="card-title">Hello</h3>
                <p ngProjectAs="card-body" class="text-white">ceci est le corps de ma card</p>
                <p ngProjectAs="card-footer" class="text-white">Footer</p>

            </app-standard-modal>
        </div>
 

        <!-- tarification -->
        <div
        class="w-full mb-2"
        >
            <label 
            for="tarification"	 
            >
                Tarif horaire en €
            </label>
            <input 
            formControlName="tarification" 
            type="number" 
            class="w-full rounded-xl border border-noir focus:outline-none focus:ring-2 focus:ring-vert focus:border-transparent" 
             required 
            />
            <div class="h-5 mt-1 text-sm">
                @let tarificationInput = form.controls.tarification;
                @if (tarificationInput.invalid && (tarificationInput.touched)) {
                    @if (tarificationInput.hasError('required')) {
                        <span
                        class="text-rouge">
                            Veuillez renseigner le tarif de la borne
                        </span>
                    }
                }
            </div>
        </div>



        <!-- Puissance de la borne -->
        <div
        class="w-full mb-4"
        >
            <label 
            for="power" 
            >
                Puissance de la borne
            </label>
            <select 
            formControlName="power"
            name="power"
            class="w-full rounded-xl border border-noir focus:outline-none focus:ring-2 focus:ring-vert focus:border-transparent" 
            required
            >
                <option value="" disabled>Choisissez une puissance de borne</option>
                <option value="3,7 kVA">3,7 kVA</option>
                <option value="7,4 kVA">7,4 kVA</option>
                <option value="11 kVA">11 kVA</option>
                <option value="22 kVA">22 kVA</option>
            </select>
        </div>


        <!-- instructions -->
        <div
        class="w-full mb-4"
        >
            <label 
            for="instruction"	 
            class="hidden"
            >
                Vos instructions pour accéder à la borne
            </label>
            <textarea 
            formControlName="instruction" 
            type="instruction" 
            class="w-full rounded-xl border border-noir focus:outline-none focus:ring-2 focus:ring-vert focus:border-transparent" 
            placeholder="Vos instructions (optionel)" 
            >
            </textarea>

        </div>


        <!-- Borne sur pieds ou un mur -->
        <div
        class="w-full mb-4 flex flex-col"
        >
            <label 
            for="freeStanding"	 
            class="hidden"
            >
                Support de la borne
            </label>
            <input 
            formControlName="freeStanding" 
            type="checkbox" 
            name="freeStanding"
            class="mb-1 rounded-xl border border-noir accent-vert text-vert px-4 py-2 focus:outline-none focus:ring-2 focus:ring-vert focus:border-transparent"
            />
            <span class="text-gray-700">
                Borne sur pied (décocher si fixée au mur)
            </span>
        </div>


        <!-- Borne sur pieds ou un mur -->
        <div
        class="w-full mb-4 flex flex-col"
        >
            <label 
            for="available"	 
            class="hidden"
            >
                Borne disponible à la location
            </label>
            <input 
            formControlName="available" 
            type="checkbox"
            name="available"
            class="mb-1 rounded-xl border border-noir accent-vert text-vert px-4 py-2 focus:outline-none focus:ring-2 focus:ring-vert focus:border-transparent"
            />
            <span class="text-gray-700">
                Borne disponible à la location (par défaut oui, sinon décochez cette case)
            </span>
        </div>

        <button 
        type="submit" 
        [disabled]="form.invalid"
        class="mt-8 uppercase cursor-pointer bg-noir text-blanc px-4 py-2 rounded-md border border-vert ease-in-out duration-200 hover:drop-shadow-2xl hover:text-vert"
        >
            Ajouter votre borne
        </button>

    </form>
</section>  
