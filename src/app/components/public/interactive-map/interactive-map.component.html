

<section 
class="w-11/12 md:w-4/6 mx-auto my-30"
>
    <svg class="rotate-90 mx-auto" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24">
        <path fill="currentColor" d="M8 5v14l11-7z"/>
    </svg>

    <div
    class="md:w-2/6 mx-auto mb-6"
    >
        <h2
        class="text-center text-md md:text-xl uppercase"
        >
            Rechercher une borne
        </h2>

    </div>

    <div 
    class="map-wrap mx-auto"
    >
        <div 
        class="map" 
        #map
        ></div>
        
        <div
        class="absolute top-2 left-2 w-fit h-fit group cursor-pointer flex flex-col"
        #searchContainer
        >
      
            <div 
            class="bg-blanc group-hover:bg-[#F2F2F2] rounded-md w-fit p-1 shadow-md mb-2 transition-all duration-200 ease-in-out border border-noir group-hover:border-vert group-hover:ring-noir focus:ring-2 focus:outline-none"
            >
                <svg 
                width="21" height="22" viewBox="0 0 21 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect 
                    class="group-hover:fill-[#F2F2F2] transition-all duration-200 ease-in-out"
                    y="2" width="21" height="18" rx="9" fill="#FCFCFC"/>
                    <path d="M3.28125 6.625C3.28125 6.45095 3.35039 6.28403 3.47346 6.16096C3.59653 6.03789 3.76345 5.96875 3.9375 5.96875H17.0625C17.2365 5.96875 17.4035 6.03789 17.5265 6.16096C17.6496 6.28403 17.7188 6.45095 17.7188 6.625C17.7188 6.79905 17.6496 6.96597 17.5265 7.08904C17.4035 7.21211 17.2365 7.28125 17.0625 7.28125H3.9375C3.76345 7.28125 3.59653 7.21211 3.47346 7.08904C3.35039 6.96597 3.28125 6.79905 3.28125 6.625ZM5.46875 11C5.46875 10.826 5.53789 10.659 5.66096 10.536C5.78403 10.4129 5.95095 10.3438 6.125 10.3438H14.875C15.049 10.3438 15.216 10.4129 15.339 10.536C15.4621 10.659 15.5312 10.826 15.5312 11C15.5312 11.174 15.4621 11.341 15.339 11.464C15.216 11.5871 15.049 11.6562 14.875 11.6562H6.125C5.95095 11.6562 5.78403 11.5871 5.66096 11.464C5.53789 11.341 5.46875 11.174 5.46875 11ZM8.09375 15.375C8.09375 15.201 8.16289 15.034 8.28596 14.911C8.40903 14.7879 8.57595 14.7188 8.75 14.7188H12.25C12.424 14.7188 12.591 14.7879 12.714 14.911C12.8371 15.034 12.9062 15.201 12.9062 15.375C12.9062 15.549 12.8371 15.716 12.714 15.839C12.591 15.9621 12.424 16.0312 12.25 16.0312H8.75C8.57595 16.0312 8.40903 15.9621 8.28596 15.839C8.16289 15.716 8.09375 15.549 8.09375 15.375Z" fill="#1D1E18"/>
                </svg>
            </div>

            <!-- Input adresse -->

            <input
            [(ngModel)]="searchQuery"
            [ngClass]="{
                'opacity-100 max-h-40 scale-100': searchQuery,
                'opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100': !searchQuery
              }"
            class="opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100 focus:opacity-100 focus:scale-100 active:scale-100 active:opacity-100 focus:max-h-40 transition-all duration-300 delay-200 ease-in-out rounded-md border border-noir focus:ring-vert placeholder:text-sm relative" 
            type="text"
            #searchInput
            (input)="onSearchInput(searchInput.value)"
            name="searchQuery"
            placeholder="Recherche une adresse..."
            >

            <!-- Suggestion après auto-complétion -->

            @if(suggestions.length > 0) {
                
                <ul
                class="absolute left-0 top-20 bg-white border border-gray-300 w-full mt-1 rounded-xl z-50 shadow-md max-h-60 overflow-auto"
                >
                    
                    @for(suggestion of suggestions; track suggestion.id; let i = $index) {
                        <li
                        (click)="selectSuggestion(i)"
                        class="px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm"
                        >
                            {{ suggestion.place_name }}
                        </li>
                    }

                    
                </ul>


            }

            
            <!-- Date picker -->

            <input
            [(ngModel)]="bookingDate"
            [ngClass]="{
              'opacity-100 max-h-40 scale-100': showInputs,
              'opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100': !showInputs
            }"
            class="opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100 focus:opacity-100 focus:scale-100 active:scale-100 active:opacity-100 focus:max-h-40 transition-all duration-300 delay-200 ease-in-out rounded-md border border-noir focus:ring-vert placeholder:text-sm mt-2 bg-blanc text-noir w-fit text-sm py-0.5 px-2"
            type="date"
            name="rentalDate"
            placeholder="Date de location"
            />

            <!-- Time picker -->

            <div
            [ngClass]="{
                'opacity-100 max-h-40 scale-100': showInputs,
                'opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100': !showInputs
            }"
            class="opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100 focus:opacity-100 focus:scale-100 active:scale-100 active:opacity-100 focus:max-h-40 transition-all duration-300 delay-200 ease-in-out rounded-md mt-2 w-fit bg-blanc flex border border-noir "
            >
            <input
                [(ngModel)]="bookingStartTime"
                type="time"
                step="1800"
                min="09:00"
                max="18:00"
                class="flex-1 border-0 text-noir bg-blanc rounded-s-md text-sm py-0.5 px-2 focus:ring-vert focus:outline-none"
            />
            <span class="inline-flex items-center px-3 text-sm text-noir bg-blanc rounded-e-md">
                <svg class="w-4 h-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path
                    fill-rule="evenodd"
                    d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z"
                    clip-rule="evenodd"
                />
                </svg>
            </span>
            </div>

            <div
            [ngClass]="{
                'opacity-100 max-h-40 scale-100': showInputs,
                'opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100': !showInputs
            }"
            class="opacity-0 max-h-0 scale-95 group-hover:opacity-100 group-hover:max-h-40 group-hover:scale-100 focus:opacity-100 focus:scale-100 active:scale-100 active:opacity-100 focus:max-h-40 transition-all duration-300 delay-200 ease-in-out rounded-md mt-2 w-fit bg-blanc flex border border-noir"
            >
            <input
                [(ngModel)]="bookingEndTime"
                type="time"
                step="1800"
                min="09:00"
                max="18:00"
                class="flex-1 border-0 text-noir bg-blanc rounded-s-md text-sm py-0.5 px-2 focus:ring-vert focus:outline-none"
            />
            <span class="inline-flex items-center px-3 text-sm text-noir bg-blanc rounded-e-md">
                <svg class="w-4 h-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path
                    fill-rule="evenodd"
                    d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm11-4a1 1 0 1 0-2 0v4a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414L13 11.586V8Z"
                    clip-rule="evenodd"
                />
                </svg>
            </span>
            </div>

        </div>
    </div>
    
</section>





